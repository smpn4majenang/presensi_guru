<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Rekap Presensi Guru</title>
<style>
body{font-family:Arial;padding:20px}
table{border-collapse:collapse;width:100%;margin-top:15px}
th,td{border:1px solid #ccc;padding:6px;text-align:center}
.valid{background:#c8f7c5}
.invalid{background:#f7c5c5}
</style>
</head>
<body>

<h2>Login Admin</h2>
<input id="u" placeholder="Username">
<input id="p" type="password" placeholder="Password">
<button onclick="login()">Login</button>

<div id="app" style="display:none">
<h3>Rekap Presensi Guru</h3>

<table id="tbl">
<thead>
<tr>
<th>Waktu</th>
<th>Nama</th>
<th>Jenis</th>
<th>Jarak (m)</th>
<th>Status</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>

<script>
const URL = 'GANTI_DENGAN_URL_WEB_APP';

function login(){
  fetch(`${URL}?login=1&u=${u.value}&p=${p.value}`)
  .then(r=>r.text())
  .then(res=>{
    if(res=='OK'){
      document.getElementById('app').style.display='block';
      loadData();
    } else {
      alert('Login gagal');
    }
  });
}

function loadData(){
  fetch(URL)
  .then(r=>r.json())
  .then(d=>{
    const tb=document.querySelector('#tbl tbody');
    tb.innerHTML='';
    d.slice(1).forEach(r=>{
      const tr=document.createElement('tr');
      tr.className=r[7]=='Valid'?'valid':'invalid';
      tr.innerHTML=`
        <td>${r[0]}</td>
        <td>${r[1]}</td>
        <td>${r[3]}</td>
        <td>${r[6]}</td>
        <td>${r[7]}</td>`;
      tb.appendChild(tr);
    });
  });
}
</script>

</body>
</html>
